{
  "id": "custom-dex-example-uuid",
  "version": "1.0.0",
  "meta": {
    "name": "Custom DEX Integration Example",
    "author": "0x1234567890abcdef1234567890abcdef1234567890abcdef1234567890abcdef",
    "description": "Example showing how to integrate a custom DEX (e.g., BlueMove) that we haven't integrated yet",
    "created_at": 1700000000000,
    "updated_at": 1700000000000,
    "tags": ["custom", "bluemove", "advanced"]
  },
  "nodes": [
    {
      "id": "borrow_1",
      "type": "FLASH_BORROW",
      "protocol": "NAVI",
      "params": {
        "asset": "0x2::sui::SUI",
        "amount": "10000000000"
      },
      "outputs": [
        {
          "id": "coin_borrowed",
          "type": "Coin<0x2::sui::SUI>",
          "output_type": "COIN"
        },
        {
          "id": "receipt",
          "type": "FlashLoanReceipt",
          "output_type": "RECEIPT"
        }
      ]
    },
    {
      "id": "custom_swap_bluemove",
      "type": "CUSTOM",
      "protocol": "CUSTOM",
      "label": "Swap on BlueMove (Custom)",
      "params": {
        "target": "0xb24b6789e088b876afabca733bed2299fbc9e2d6369be4d1acfa17d8145454d9::swap::swap_exact_input",
        "description": "Custom call to BlueMove DEX swap function",
        "arguments": [
          {
            "type": "object",
            "object_id": "0xBlueMovPoolObjectID",
            "comment": "BlueMove pool object"
          },
          {
            "type": "input",
            "input_ref": "borrow_1.coin_borrowed",
            "comment": "Coin from flash loan"
          },
          {
            "type": "pure",
            "value": "5000000",
            "value_type": "u64",
            "comment": "Minimum output amount (slippage protection)"
          },
          {
            "type": "pure",
            "value": true,
            "value_type": "bool",
            "comment": "Direction flag (true = A to B)"
          }
        ],
        "type_arguments": [
          "0x2::sui::SUI",
          "0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"
        ]
      },
      "inputs": {
        "coin_in": "borrow_1.coin_borrowed"
      },
      "outputs": [
        {
          "id": "coin_out",
          "type": "Coin<USDC>",
          "output_type": "COIN"
        }
      ]
    },
    {
      "id": "swap_back_cetus",
      "type": "DEX_SWAP",
      "protocol": "CETUS",
      "label": "Swap back on Cetus",
      "params": {
        "pool_id": "0xCetusPoolUSDC_SUI",
        "coin_type_a": "0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN",
        "coin_type_b": "0x2::sui::SUI",
        "direction": "A_TO_B",
        "amount_mode": "EXACT_IN",
        "amount": "15000000",
        "slippage_tolerance": "0.01"
      },
      "inputs": {
        "coin_in": "custom_swap_bluemove.coin_out"
      },
      "outputs": [
        {
          "id": "coin_out",
          "type": "Coin<0x2::sui::SUI>",
          "output_type": "COIN"
        }
      ]
    },
    {
      "id": "repay_1",
      "type": "FLASH_REPAY",
      "protocol": "NAVI",
      "params": {
        "asset": "0x2::sui::SUI"
      },
      "inputs": {
        "coin_repay": "swap_back_cetus.coin_out",
        "receipt": "borrow_1.receipt"
      }
    }
  ],
  "edges": [
    {
      "id": "edge_1",
      "source": "borrow_1",
      "source_output": "coin_borrowed",
      "target": "custom_swap_bluemove",
      "target_input": "coin_in",
      "edge_type": "COIN",
      "coin_type": "0x2::sui::SUI"
    },
    {
      "id": "edge_2",
      "source": "custom_swap_bluemove",
      "source_output": "coin_out",
      "target": "swap_back_cetus",
      "target_input": "coin_in",
      "edge_type": "COIN",
      "coin_type": "0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"
    },
    {
      "id": "edge_3",
      "source": "swap_back_cetus",
      "source_output": "coin_out",
      "target": "repay_1",
      "target_input": "coin_repay",
      "edge_type": "COIN",
      "coin_type": "0x2::sui::SUI"
    },
    {
      "id": "edge_receipt",
      "source": "borrow_1",
      "source_output": "receipt",
      "target": "repay_1",
      "target_input": "receipt",
      "edge_type": "RECEIPT"
    }
  ]
}
